;!function(require, directRequire){;"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const request=require('./15ba1827c7f6564a45df6bd44da3a977.js'),urlConfig=require('./f171257bbcaef547a3cf27266ccb0db2.js'),log=require('./72653d4b93cdd7443296229431a7aa9a.js'),store=require('./bc78839ccca8df9e5ceeb7fae11b7be2.js'),configActions=require('./3b66d845db4d098b7a16cb0357f5c072.js'),SYNC_INTERVAL=600000;let syncTimer,lastConfig="";async function sync(){const{body:a}=await request({url:urlConfig.syncBBSConfig,needToken:1});if(a){const b=a.config_list||[],c=JSON.stringify(b);if(lastConfig===c)return;lastConfig=c;const d=[];for(const a of b)try{a.logid&&a.config&&d.push({logid:a.logid,config:JSON.parse(a.config)})}catch(b){log.error(`sync bbs log config parse error for logid ${a.logid}`)}store.dispatch(configActions.updateBBSConfig(d))}}exports.sync=sync;function startSync(){global.online||global.isDevWindow||(sync().catch((a)=>{log.error(`start sync error: ${a}`)}),syncTimer=setInterval(()=>{sync().catch((a)=>{log.error(`start sync error: ${a}`)})},SYNC_INTERVAL))}exports.startSync=startSync;function stopSync(){clearInterval(syncTimer)}exports.stopSync=stopSync;
;}(require("lazyload"), require);
