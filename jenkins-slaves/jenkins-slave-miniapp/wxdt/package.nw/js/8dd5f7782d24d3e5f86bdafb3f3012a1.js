;!function(require, directRequire){;"use strict";const tslib_1=require("tslib"),React=require("react"),Dropdown=require('./bc04f89cf8edab62335086e0a2a5a103.js'),getFonts=require('./de640e457745362cd277fa7e893af981.js'),locales=require('./common/locales/index.js'),SECTION="appearance";let AppearanceSetting=class extends React.Component{constructor(a){super(a),this.handleThemeClick=(a)=>{const b=a.currentTarget.dataset.theme;this.props.updateIDESetting(SECTION,"theme",b),this.setState({theme:b})},this.handleDevtoolsThemeClick=(a)=>{const b=a.currentTarget.dataset.theme;this.props.updateIDESetting(SECTION,"devtoolsTheme",b),this.setState({devtoolsTheme:b})},this.handleFontSizeChange=(a)=>{let b=parseInt(a.target.value,10);0>=b&&(b=1),this.props.updateIDESetting(SECTION,"fontSize",b),this.props.updateIDESetting(SECTION,"lineHeight",b+this.state.lineSpacing),this.setState({fontSize:b})},this.handleLineSpacingChange=(a)=>{let b=parseInt(a.target.value,10);0>b&&(b=0),this.props.updateIDESetting(SECTION,"lineHeight",b+this.state.fontSize),this.setState({lineSpacing:b})},this.handleMaskClick=()=>{this.setState({_fontFamilyOpen:!1,_localeOpen:!1,_showMask:!1})};const{settings:b}=this.props,c=b.fontSize||12;let d;d=b.lineHeight?b.lineHeight>=c?b.lineHeight-c:0:0,this.setupConstants(),this.setupControllers(),this.state={_fontFamilyOpen:!1,_fontFamilySelectedIndex:0,_fontFamilyLeft:0,_fontFamilyTop:0,_localeOpen:!1,_localeSelectedIndex:this.localeController.getIndex(locales.getSourceLocale()),_localeLeft:0,_localeTop:0,_showMask:!1,lineHeight:b.lineHeight,locale:b.locale,theme:b.theme||"white",devtoolsTheme:b.devtoolsTheme||"white",fontFamily:b.fontFamily||"Arial",fontSize:c,lineSpacing:d}}setupConstants(){}setupControllers(){const a=this;this.fontFamilyController=new class{constructor(){this.fontFamilyList=[],this.toggle=async()=>{if(!a.state._fontFamilyOpen){let b=a.state._fontFamilySelectedIndex;0===this.fontFamilyList.length&&(this.fontFamilyList=await getFonts(),b=this.fontFamilyList.indexOf(a.state.fontFamily),-1===b&&(b=0)),0===this.fontFamilyList.length&&(this.fontFamilyList=[a.state.fontFamily],b=0);const c=a.fontInput.getBoundingClientRect();a.setState({_fontFamilyOpen:!0,_localeOpen:!1,_fontFamilySelectedIndex:b,_fontFamilyLeft:c.left,_fontFamilyTop:c.top+25,_showMask:!0})}else a.setState({_fontFamilyOpen:!1,_localeOpen:!1,_showMask:!1})},this.onItemSelected=(b,c)=>{if(b!==a.state._fontFamilySelectedIndex){a.props.updateIDESetting(SECTION,"fontFamily",c),a.setState({_fontFamilyOpen:!1,_localeOpen:!1,_showMask:!1,_fontFamilySelectedIndex:b,fontFamily:c})}},this.getItemStyle=(a)=>{return{fontFamily:this.fontFamilyList[a]}}}},this.localeController=new class{constructor(){this.localeList=[{locale:locales.systemLocale,dec:locales.config.MENU_SYSTEM_LANGUAGE},...locales.supportedLanguages],this.getIndex=(a)=>{const b=this.localeList.findIndex((b)=>b.locale===a);return-1===b?0:b},this.toggle=()=>{if(!a.state._localeOpen){const b=this.getIndex(locales.getSourceLocale()),c=a.localeInput.getBoundingClientRect();a.setState({_localeOpen:!0,_fontFamilyOpen:!1,_localeSelectedIndex:b,_localeLeft:c.left,_localeTop:c.top+25,_showMask:!0})}else a.setState({_localeOpen:!1,_fontFamilyOpen:!1,_showMask:!1})},this.onItemSelected=(b)=>{if(b!==a.state._localeSelectedIndex){const c=this.localeList[b].locale;a.props.updateIDESetting(SECTION,"locale",c),a.setState({_localeOpen:!1,_fontFamilyOpen:!1,_showMask:!1,_localeSelectedIndex:b,locale:c})}}}}}getSetting(){const{theme:a,fontFamily:b,fontSize:c,lineSpacing:d}=this.state;return{theme:a,fontFamily:b,fontSize:c,lineHeight:d+c}}render(){return React.createElement("div",{className:"setting-theme ui-form"},this.state._showMask?React.createElement("div",{className:"ui-mask ui-mask-transparent",onClick:this.handleMaskClick}):null,React.createElement("div",{className:"ui-form-item ui-form-item-inline ui-form-item-vt"},React.createElement("label",{className:"ui-form-label"},locales.config.SETTING_THEME),React.createElement("div",{className:"ui-form-controls",style:{flexDirection:"row"}},React.createElement("label",{className:"ui-radio",onClick:this.handleThemeClick,"data-theme":"dark"},React.createElement("i",{className:"dark"===this.state.theme?"ui-icon-radio-o":"ui-icon-radio"}),React.createElement("span",{className:"ui-radio-text"},locales.config.SETTING_THEME_DARK)),React.createElement("label",{className:"ui-radio",onClick:this.handleThemeClick,"data-theme":"white"},React.createElement("i",{className:"white"===this.state.theme?"ui-icon-radio-o":"ui-icon-radio"}),React.createElement("span",{className:"ui-radio-text"},locales.config.SETTING_THEME_WHITE)))),React.createElement("div",{className:"ui-form-item ui-form-item-inline ui-form-item-vt"},React.createElement("label",{className:"ui-form-label"},locales.config.SETTING_DEVTOOLS_THEME),React.createElement("div",{className:"ui-form-controls",style:{flexDirection:"row"}},React.createElement("label",{className:"ui-radio",onClick:this.handleDevtoolsThemeClick,"data-theme":"dark"},React.createElement("i",{className:"dark"===this.state.devtoolsTheme?"ui-icon-radio-o":"ui-icon-radio"}),React.createElement("span",{className:"ui-radio-text"},locales.config.SETTING_THEME_DARK)),React.createElement("label",{className:"ui-radio",onClick:this.handleDevtoolsThemeClick,"data-theme":"white"},React.createElement("i",{className:"white"===this.state.devtoolsTheme?"ui-icon-radio-o":"ui-icon-radio"}),React.createElement("span",{className:"ui-radio-text"},locales.config.SETTING_THEME_WHITE)))),React.createElement("div",{className:"ui-form-item ui-form-item-inline",style:{display:this.props.isWebDebugger?"none":""}},React.createElement("label",{className:"ui-form-label"},locales.config.SETTING_FONT_FAMILY),React.createElement("div",{className:"ui-form-controls"},React.createElement("div",{className:"ui-selector ui-selector-default",onClick:this.fontFamilyController.toggle},React.createElement("p",{className:"ui-selector-input",ref:(a)=>this.fontInput=a},this.state.fontFamily),React.createElement("div",{className:"ui-selector-dropdown"},React.createElement("i",{className:"ui-icon-arrow-down-o"})),React.createElement(Dropdown,{width:207,height:100,top:this.state._fontFamilyTop,left:this.state._fontFamilyLeft,open:this.state._fontFamilyOpen,items:this.fontFamilyController.fontFamilyList,selectedIndex:this.state._fontFamilySelectedIndex,getItemStyle:this.fontFamilyController.getItemStyle,onItemSelected:this.fontFamilyController.onItemSelected})))),React.createElement("div",{className:"ui-flex ui-form-item",style:{display:this.props.isWebDebugger?"none":""}},React.createElement("div",{className:"ui-flex-item"},React.createElement("div",{className:"ui-form-item ui-form-item-inline"},React.createElement("label",{className:"ui-form-label"},locales.config.SETTING_FONT_SIZE),React.createElement("div",{className:"ui-form-controls"},React.createElement("div",{className:"ui-input-box"},React.createElement("input",{type:"number",placeholder:"",value:this.state.fontSize,className:"ui-input",onChange:this.handleFontSizeChange}))))),React.createElement("div",{className:"ui-flex-item"},React.createElement("div",{className:"ui-form-item ui-form-item-inline"},React.createElement("label",{htmlFor:"",className:"ui-form-label"},locales.config.SETTING_LINE_SPACING),React.createElement("div",{className:"ui-form-controls"},React.createElement("div",{className:"ui-input-box"},React.createElement("input",{type:"number",placeholder:"",value:this.state.lineSpacing,className:"ui-input",onChange:this.handleLineSpacingChange})))))),React.createElement("div",{className:"ui-form-item ui-form-item-inline"},React.createElement("label",{className:"ui-form-label"},locales.config.SETTING_LANGUAGE),React.createElement("div",{className:"ui-form-controls"},React.createElement("div",{className:"ui-selector ui-selector-default",onClick:this.localeController.toggle},React.createElement("p",{className:"ui-selector-input",ref:(a)=>this.localeInput=a},this.localeController.localeList[this.state._localeSelectedIndex].dec),React.createElement("div",{className:"ui-selector-dropdown"},React.createElement("i",{className:"ui-icon-arrow-down-o"})),React.createElement(Dropdown,{width:207,height:100,top:this.state._localeTop,left:this.state._localeLeft,open:this.state._localeOpen,items:this.localeController.localeList.map((a)=>a.dec),selectedIndex:this.state._localeSelectedIndex,onItemSelected:this.localeController.onItemSelected})))))}};AppearanceSetting=tslib_1.__decorate([locales.mixin],AppearanceSetting),module.exports=AppearanceSetting;
;}(require("lazyload"), require);
