;!function(require, directRequire){;"use strict";const React=require("react"),projectActions=require('./cc2c2970ff81ae4a83123e81ee123da2.js'),infoActions=require('./1fcc6bd55b687d154a4247e57fe3011d.js'),Animation=require('./875171e7b864aa58d026d4fa0999fbd1.js'),projectManager=require('./3bfffbe88b3d923921f851c0697974fe.js'),{connect}=require("react-redux"),mapStateToProps=(a)=>{return{show:a.info.changeAppIdInfo.show}},mapDispatchToProps=(a)=>{return{close:()=>{a(infoActions.setChangeAppIdInfo({show:!1}))},changeAppId:(b)=>{return a(projectActions.changeProjectAppId(b))},showSuccessTip:(b)=>{a(infoActions.showSuccessTip(b))}}};class ChangeAppIdDialog extends React.Component{constructor(a){super(a),this.onClose=()=>{this.setState({show:!1})},this.onConfirm=async()=>{try{const a=this.state.newAppId.trim();if(!a)return void this.appidInput.focus();await this.props.changeAppId(a),this.props.showSuccessTip("\u4FEE\u6539\u6210\u529F"),this.onClose()}catch(a){this.setState({errorMsg:`修改失败：${a}`})}},this.onAnimationOut=()=>{this.props.close()},this.onInputChange=(a)=>{const b=a.currentTarget;let c=b.value.trim();c=c.replace(/[^wxa-f0-9]*/g,""),this.setState({newAppId:c})},this.state={show:a.show,newAppId:"",errorMsg:""}}componentWillReceiveProps(a){a.show!==this.props.show&&this.setState({show:a.show})}render(){return React.createElement(Animation,{show:this.state.show,style:{width:600,marginLeft:-300},inClassName:"ui-animate-pull-down ui-dialog",outClassName:"ui-animate-pull-up ui-dialog",onAnimationOut:this.onAnimationOut},React.createElement("div",{className:"ui-dialog-bd"},React.createElement("div",{className:"ui-form"},React.createElement("div",{className:"ui-form-item ui-form-item-inline"},React.createElement("label",{htmlFor:"",className:"ui-form-label"},"AppId"),React.createElement("div",{className:"ui-form-controls"},React.createElement("div",{className:"ui-input-box"},React.createElement("input",{type:"text",ref:(a)=>{this.appidInput=a},className:"ui-input",value:this.state.newAppId,maxLength:100,onChange:this.onInputChange,placeholder:projectManager.getCurrent().appid})))),React.createElement("div",{className:"ui-form-item ui-form-item-inline",style:this.state.errorMsg?{}:{display:"none"}},React.createElement("label",{className:"ui-form-label"}),React.createElement("div",{className:"ui-form-controls"},React.createElement("p",{className:"dashboard-error-tips"},this.state.errorMsg))))),React.createElement("div",{className:"ui-dialog-ft"},React.createElement("div",{className:"ui-dialog-action"},React.createElement("button",{className:"ui-button ui-button-default",onClick:this.onClose.bind(this)},"\u53D6\u6D88"),React.createElement("button",{className:"ui-button ui-button-primary",onClick:this.onConfirm.bind(this)},"\u786E\u5B9A"))))}}module.exports=connect(mapStateToProps,mapDispatchToProps)(ChangeAppIdDialog);
;}(require("lazyload"), require);
