;!function(require, directRequire){;"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const request=require('./233d77ecf0781f44985f684f70e316d0.js'),urlConfig=require('./f171257bbcaef547a3cf27266ccb0db2.js'),LONGPOLL_URL_REGULAR_EXPRESSION=/"(https:\/\/long.open.weixin.qq.com\/connect\/l\/qrconnect\?uuid=.+?)"/,QR_CODE_RELATIVE_URL_REGULAR_EXPRESSION=/src="\/(connect\/qrcode\/.+)"/,QRCODE_FORMAT={LINK:"link",IMAGE:"image"};exports.QRCODE_FORMAT=QRCODE_FORMAT;const getLoginPage=()=>new Promise((a,b)=>{request({url:urlConfig.LOGIN_URL},(c,d,e)=>{c?b(c):a({response:d,body:e})})});exports.getLoginPage=getLoginPage;const extractLoginInfo=(a,b=QRCODE_FORMAT.LINK)=>new Promise((c,d)=>{try{const e=a.match(QR_CODE_RELATIVE_URL_REGULAR_EXPRESSION)[1],f=`${urlConfig.OPEN_DOMAIN}${e}`,g=a.match(LONGPOLL_URL_REGULAR_EXPRESSION)[1];b===QRCODE_FORMAT.IMAGE?request({url:f,encoding:null,headers:{"Content-Type":"image/jpeg"}},(a,b,e)=>{a?d(a):c({longPollURL:g,qrcode:e})}):c({longPollURL:g,qrcode:f})}catch(a){d(a)}});exports.extractLoginInfo=extractLoginInfo;const getLoginInfo=(a=QRCODE_FORMAT.LINK)=>new Promise((b,c)=>{request({url:urlConfig.LOGIN_URL},(d,e,f)=>{if(d)c(d);else try{const d=f.match(QR_CODE_RELATIVE_URL_REGULAR_EXPRESSION)[1],e=`${urlConfig.OPEN_DOMAIN}${d}`,g=f.match(LONGPOLL_URL_REGULAR_EXPRESSION)[1];a===QRCODE_FORMAT.IMAGE?request({url:e,encoding:null,headers:{"Content-Type":"image/jpeg"}},(a,d,e)=>{a?c(a):b({longPollURL:g,qrcode:e})}):b({longPollURL:g,qrcode:e})}catch(a){c(a)}})});exports.getLoginInfo=getLoginInfo;
;}(require("lazyload"), require);
