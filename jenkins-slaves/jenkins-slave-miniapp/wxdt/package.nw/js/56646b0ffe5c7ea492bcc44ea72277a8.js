;!function(require, directRequire){;'use strict';const moment=require('moment'),store=require('./bc78839ccca8df9e5ceeb7fae11b7be2.js'),C=require('./56c390e04c10e91a4aa2a2c19d9a885d.js'),dirConfig=require('./92320c1386e6db6a6f2556736a9bc280.js'),appserviceMessager=require('./a1dd553cc059d528bb0ef56afed53968.js'),gameserviceMessager=require('./e3681b47a6ce46a8998b8cdff40bdb12.js'),syncMessageUtils=require('./2a36cc34e5f44e62f9188b9fc0871d70.js'),simulatorActions=require('./ba23d8b47b1f4ea08b9fd49939b9443f.js'),toolbarActions=require('./fc137838572a83604db39acff8e909e0.js'),infoActions=require('./1fcc6bd55b687d154a4247e57fe3011d.js'),getMessager=(a)=>{const b=a.project.current||{};return b.attr&&b.attr.gameApp?gameserviceMessager:appserviceMessager},checkProxy=(a)=>{const b=store.getState(),c=getMessager(b),d=nw.App.getProxyForURL(a);c.send({command:'SYSTEM_CALLBACK',data:{api:'checkProxy',data:[{url:a,proxy:d}]}})},showDecryptedInfo=()=>{const a=store.getState(),b=getMessager(a);b.send({command:'SYSTEM_CALLBACK',data:{api:'showDecryptedInfo',data:a.simulator.decryptedInfo}})},openToolsLog=()=>{nw.Shell.openItem(dirConfig.WeappLog)},openPlugin=()=>{nw.Shell.openItem(dirConfig.WeappPlugin)},openVendor=()=>{nw.Shell.openItem(dirConfig.WeappVendor)},syncMessage=()=>{syncMessageUtils.sync()},build=()=>{const a=store.dispatch.bind(store);simulatorActions.compile({origin:C.COMPILE_ORIGIN.CONSOLE})(a,store.getState)},preview=()=>{const a=store.dispatch.bind(store);a(toolbarActions.togglePreviewCode())},upload=()=>{const a=store.dispatch.bind(store);a(infoActions.setUploadInfo({show:!0}))},showSystemInfo=()=>{chrome.processes.getProcessInfo([],!0,(a)=>{let b=0;const c=[];let d='';for(const e in a){const f=a[e];f.privateMemory&&(b+=f.privateMemory);let g=f.type;const h=f.tasks;'extension'===g&&(g='',h.forEach((a)=>{a.tabId||(d=a.title.replace(/.*open\.weixin\.qq\.com\//g,'').replace(/\?.*/,''),g+=`${d};`)}),g=g.replace(/网页视图：/g,'')),g=g.replace('\u7F51\u9875',''),c.push({type:g,osProcessId:f.osProcessId,privateMemory:(f.privateMemory/1024/1024).toFixed(2)})}b=b/1024/1024;const e=store.getState(),f=getMessager(e);f.send({command:'SYSTEM_CALLBACK',data:{api:'showSystemInfo',data:{restartInfo:{restartTimes:e.simulator.restartTimes,beginTime:moment(global.beginTime).calendar()},memory:b,info:c}}})})};module.exports={checkProxy,showDecryptedInfo,openToolsLog,openPlugin,openVendor,syncMessage,build,preview,upload,showSystemInfo};
;}(require("lazyload"), require);
