;!function(require, directRequire){;"use strict";const path=require("path"),vendorManager=require('./d28a711224425b00101635efe1034c99.js'),checkAppConfig=require('./1dea83a77e99a7c94f6b6f01f5c175b0.js'),compileCache=require('./2e9637e8a0816a626f7db9a0dee5efe8.js'),fileRules=require('./1c8a8c710417d102ab574145dc51b4b0.js'),{asDebug,workerAsDebug,vendorList,workerVendorList,devVendorList,devWorkerList,htmltpl,vendorListPlaceholder,asdebugPlaceholder}=require('./ebfcad0a5e72b6e693634486564b1394.js'),vendors=global.appConfig.isDev&&!nw.App.manifest.forceVendor?devVendorList:vendorList,workerVendors=global.appConfig.isDev&&!nw.App.manifest.forceVendor?devWorkerList:workerVendorList;function resetCache(){compileCache.remove(compileCache.CACHE_KEYS.JS_APPSERVICE)}function hidedInDevtoolsMaker(a){const b=path.posix.join("appservice",a);return`<script>\n// ${a} has been hided by project.config.json 'debugOptions.hidedInDevtools'\n//# sourceURL=http://127.0.0.1:${global.proxyPort}/${b}\n</script>`}async function getAppService(a,b={}){await compileCache.init(a);const c=compileCache.CACHE_KEYS.JS_APPSERVICE;let d=compileCache.get(c);if(d&&!b.force)return d;const e=[],f=[];global.appConfig.isDev?e.push("<script src=\"./__asdebug__/asdebug.js\" charset=\"UTF-8\"></script>"):e.push(`<script charset="UTF-8">${asDebug}</script>`);const g=await checkAppConfig(a),h=g.workers;g.workers&&e.push(global.appConfig.isDev?"<script src=\"__workerasdebug__/workerasdebug.js\" charset=\"UTF-8\"></script>":`<script charset="UTF-8">${workerAsDebug}</script>`);const i=a.debugOptions&&a.debugOptions.hidedInDevtools||[];for(const c of vendors){const a=path.extname(c);".js"===a?(f.push(`<script src="./__dev__/${c}" charset="UTF-8"></script>`),fileRules.isFileHidedInDevtools(c,i)&&f.push(hidedInDevtoolsMaker(`./__dev__/${c}`))):".css"===a&&f.push(`<link rel="stylesheet" type="text/css" href='./${c}' />`)}if(h){const a=[];for(const b of workerVendors){const c=path.extname(b);".js"===c&&a.push(`<script src="__workerdev__/${b}" charset="UTF-8"></script>`)}const b=`<script charset="UTF-8">var __workerVendors__ = ${JSON.stringify(workerVendors)}</script>`;f.push(b+"\n"+a.join("\n"))}return g.cloud&&f.push(`<script src="__alphadev__/WACloud.js" charset="UTF-8"></script>`),d=htmltpl.split(vendorListPlaceholder).join(f.join("\n")).split(asdebugPlaceholder).join(e.join("\n")),compileCache.set(c,d),d}vendorManager.on("VENDOR_CONFIG_CHANGE",resetCache),vendorManager.on("VENDOR_VERSION_CHANGE",resetCache),module.exports=getAppService;
;}(require("lazyload"), require);
