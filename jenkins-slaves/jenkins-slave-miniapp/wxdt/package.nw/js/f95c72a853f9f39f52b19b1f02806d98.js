'use strict';!function(require,directRequire){function a(a,b){return Math.floor(Math.random()*(b-a+1))+a}function b(){const a=i.getState(),b=a.simulator||{},c=((a.project||{}).current||{}).runtimeAttr,d=((c||{}).setting||{}).ExpendedMaxWebviewDepth||g.MAX_PAGE_STACK_DEPTH,e=b.webviewInfos||{};let f=0,h=!1;for(const a in e)h||-1!=e[a].parent||(h=!0,f++),-1!=e[a].parent&&f++;return f<d}function c(a){const b=i.getState(),c=i.dispatch.bind(i),d=h.checkIsInSubPackage(b.simulator.appConfig,a);d?c({type:f.SIMULATOR_LOAD_SUBPACKAGE,data:{root:d.root,loaded:!1}}):c({type:f.SIMULATOR_LOAD_SUBPACKAGE,data:{root:'__APP__',loaded:!1}})}function d(a){const b=i.getState();let c=-1;const d=`${a}.html`;try{c=b.simulator.appConfig.tabBar.list.findIndex((a)=>a.pagePath&&a.pagePath==d)}catch(a){c=-1}return c}function e(a,b={isBack:!1,isNavigate:!1}){const{isBack:c,isNavigate:d}=b,e=i.getState();d&&a({type:f.TOOLBAR_SET_DEVICE_ROTATED_BEFORE_ROUTE,data:e.toolbar.rotated}),e.toolbar.rotated&&!k(e)&&(c?l(!1,a,i.getState):l(!1,a,i.getState,{triggerAppserviceEvent:!1,triggerWebviewEvent:!0}))}const f=require('./0634ee2ebd3e560d9d4804ecc960160f.js'),g=require('./6242f55dbdfe53c2f07b7a51568311f2.js'),h=require('./d3976cc01aeebc5b09e11c4135b6bd8d.js'),i=require('./bc78839ccca8df9e5ceeb7fae11b7be2.js'),j=require('./common/locales/index.js'),{canSimulatorRotate:k,rotateSimulator:l}=require('./a3d662b5798bbb27bf21be3e3587a588.js');module.exports={navigateTo:async function(a,g){if(!b())return{errMsg:`${g.api}:fail webview count limit exceed`};const{pathName:i,query:j}=h.parseUrl(g.args.url);return 0<=d(i)?{errMsg:`${g.api}:fail can not navigateTo a tabbar page`}:(a({type:f.SIMULATOR_NAVIGATE,data:{pathName:i,query:j}}),e(a,{isNavigate:!0}),c(i),{errMsg:`${g.api}:ok`})},navigateBack:async function(a,b){return a({type:f.SIMULATOR_NAVIGATE_BACK,delta:b.args.delta||1}),e(a,{isBack:!0}),{errMsg:`${b.api}:ok`}},redirectTo:async function(a,b){const{pathName:g,query:i}=h.parseUrl(b.args.url);return 0<=d(g)?{errMsg:`${b.api}:fail can not redirectTo a tabbar page`}:(a({type:f.SIMULATOR_REDIRECT,data:{pathName:g,query:i}}),e(a,{isNavigate:!0}),c(g),{errMsg:`${b.api}:ok`})},switchTab:async function(a,b){const{pathName:g}=h.parseUrl(b.args.url),i=d(g);return-1==i?{errMsg:`${b.api}:fail can not switch to no-tabBar page`}:(a({type:f.SIMULATOR_OPEN_TABBAR,data:{query:{},pathName:g,tabbarIndex:i}}),e(a,{isNavigate:!0}),c(g),{errMsg:`${b.api}:ok`})},reLaunch:async function(a,b){const{pathName:d,query:g}=h.parseUrl(b.args.url);return a({type:f.SIMULATOR_RELAUNCH,data:{pathName:d,query:g}}),e(a),c(d),{errMsg:`${b.api}:ok`}},updateApp:async function(b,c){return b({type:f.SIMULATOR_SET_TOAST,data:{show:!0,icon:'loading',title:j.config.APPLICATION_RESTARTING,mask:!0}}),setTimeout(()=>{b({type:f.SIMULATOR_COMPILE,data:{}})},a(1e3,5e3)),{errMsg:`${c.api}:ok`}},openUrl:async function(a,b){const c=i.getState();if(c.simulator.anyHtmlWebviewInfo)return{errMsg:`${b.api}:fail could not open unless the previous webpage is closed`};for(const d in c.simulator.webviewInfos){const a=c.simulator.webviewInfos[d];if(a.htmlwebviewInfo)return{errMsg:`${b.api}:fail could not open in a web-view page`}}return a({type:f.SIMULATOR_SET_ANY_HTMLWEBVIEW,data:{url:b.args.url,webviewID:+new Date}}),{errMsg:`${b.api}:ok`}}}}(require('lazyload'),require);