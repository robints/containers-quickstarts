;!function(require, directRequire){;"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const React=require("react"),react_1=require("react"),moment=require("moment"),locales=require('./common/locales/index.js'),ONE_SECOND=1e3,ONE_MINUTE=60*ONE_SECOND,ONE_HOUR=60*ONE_MINUTE,ONE_DAY=24*ONE_HOUR;var ANIMATE_IN_STEP;(function(a){a[a.BEFORE_START=0]="BEFORE_START",a[a.START=1]="START",a[a.END=2]="END"})(ANIMATE_IN_STEP||(ANIMATE_IN_STEP={}));class Notice extends react_1.Component{constructor(a){super(a),this.state={show:!0,collapsed:!0,animateInStep:ANIMATE_IN_STEP.BEFORE_START},this.el=null,this.onToggleCollapsed=()=>{this.setState({collapsed:!this.state.collapsed})},this.onClose=()=>{this.setState({show:!1})},this.onConfirmButtonClicked=()=>{try{this.props.buttons&&this.props.buttons.confirm&&this.props.buttons.confirm.callback&&this.props.buttons.confirm.callback()}finally{this.onClose()}},this.onCancelButtonClicked=()=>{try{this.props.buttons&&this.props.buttons.cancel&&this.props.buttons.cancel.callback&&this.props.buttons.cancel.callback()}finally{this.onClose()}},this.onAnimationOut=()=>{this.state.show||this.state.animateInStep!==ANIMATE_IN_STEP.END||this.props.onClose(this.props.id)}}componentDidMount(){this.updateTimerId=setInterval(()=>{this.forceUpdate()},ONE_MINUTE),this.props.toast&&this.props.toastDuration&&setTimeout(()=>{this.onClose()},this.props.toastDuration),this.setState({animateInStep:ANIMATE_IN_STEP.START},()=>{this.setState({animateInStep:ANIMATE_IN_STEP.END})})}componentWillUnmount(){this.updateTimerId&&clearInterval(this.updateTimerId)}render(){var a=Math.ceil;let b="auto";if(this.el&&(!this.state.show||this.state.animateInStep!==ANIMATE_IN_STEP.END)){const a=this.el.getBoundingClientRect();b=`${a.height}px`}let c="0px",d="translateX(0%) translateY(0px)",e=1;this.state.show?this.state.animateInStep===ANIMATE_IN_STEP.BEFORE_START?(c=`-200px`,d=`translateX(100%) translateY(200px)`,e=0):this.state.animateInStep===ANIMATE_IN_STEP.START&&(c=`-${b}`,d=`translateX(100%) translateY(${b})`,e=0):(c=`-${b}`,d=`translateX(0%) translateY(${b})`,e=0);const f=Object.assign({pointerEvents:"all",marginTop:c,transform:d,opacity:e,marginBottom:this.state.show?void 0:"0px"},this.props.style,global.style),g=[...this.props.items];g.sort((a,b)=>{return a.time?b.time?b.time-a.time:1:-1});const h=g.map((a)=>{return React.createElement("p",{key:`${a.name}-${a.time}`},`${a.name}  ${a.time?moment(a.time).format("HH:mm"):""}`)});let i="";if(g.length){const b=+new Date,c=this.props.time;c&&0<b-c&&(b-c<ONE_MINUTE?i=locales.config.COMMON_SECONDS_AGO.format(`${a((b-c)/ONE_SECOND)}`):b-c<ONE_HOUR?i=locales.config.COMMON_MINUTES_AGO.format(`${a((b-c)/ONE_MINUTE)}`):b-c<ONE_DAY?i=locales.config.COMMON_HOURS_AGO.format(`${a((b-c)/ONE_HOUR)}`):i=locales.config.COMMON_DAYS_AGO.format(`${a((b-c)/ONE_HOUR)}`))}let j=null;this.props.buttons&&(this.props.buttons.confirm||this.props.buttons.cancel)&&(j=React.createElement("div",{className:"ui-notice-ft"},this.props.buttons.cancel?React.createElement("a",{className:"ui-notice-button ui-notice-button-default",onClick:this.onCancelButtonClicked},this.props.buttons.cancel.title||locales.config.CANCEL):null,this.props.buttons.confirm?React.createElement("a",{className:"ui-notice-button ui-notice-button-primary",onClick:this.onConfirmButtonClicked},this.props.buttons.confirm.title||locales.config.CONFIRM):null));const k={display:"none"},l=g.length?{}:k,m=this.props.hideCloseButton?k:{},n=1<h.length?React.createElement("a",{onClick:this.onToggleCollapsed},React.createElement("i",{className:this.state.collapsed?"ui-icon-arrow-down-o":"ui-icon-arrow-up-o"})):null;return React.createElement("div",{className:"ui-notice",style:Object.assign({},f),ref:(a)=>this.el=a,onTransitionEnd:this.onAnimationOut},React.createElement("div",{className:"ui-notice-bd"},React.createElement("div",{className:"ui-notice-content"},React.createElement("div",{className:"ui-notice-content-hd"},React.createElement("i",{className:"fail"===this.props.icon?"ui-icon-error":"ui-icon-success"})),React.createElement("div",{className:"ui-notice-content-bd"},React.createElement("h4",{className:"ui-notice-content-title"},this.props.title)),React.createElement("div",{className:"ui-notice-content-ft"},React.createElement("span",null,i),React.createElement("a",{style:m,onClick:this.onClose},React.createElement("i",{className:"ui-icon-close"})))),React.createElement("div",{className:"ui-notice-msg",style:l},React.createElement("div",{className:"ui-notice-msg-bd",style:{whiteSpace:"pre-wrap",wordBreak:"break-word",fontFamily:"monospace"}},this.state.collapsed?h[0]:h),React.createElement("div",{className:"ui-notice-msg-ft"},n))),j)}}exports.Notice=Notice;
;}(require("lazyload"), require);
