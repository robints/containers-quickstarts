;!function(require, directRequire){;'use strict';const path=require('path'),FileUtils=require('./d62fc37d7aa6416d5dcc240ba94175cd.js'),tools=require('./84b183688a46c9e2626d3e6f83365e13.js'),CACHE_KEYS={JS_APPSERVICE:'js.appservice',JS_APPSERVICE_PLUGIN:'js.appservice.plugin',JS_APPSERVICE_WIDGET:'js.widget.appservice',JS_APPSERVICE_GAME:'js.game.appservice',JS_APPSERVICE_GAME_MAIN:'js.game.appservice.main',JS_PLUGINCODE_APPSERVICE:'js.plugincode.appservice',JS_PLUGINCODE_PAGEFRAME:'js.plugincode.pageframe',JS_SUBPACKAGE_APPSERVICE:'js.subpackage.appservice',JS_PAGEFRAME:'js.pageframe',JS_PAGEFRAME_PLUGIN:'js.pageframe.plugin',JS_SUBPACKAGE_GAME:'js.subpackage.game',JS_SUBCONTEXT_JS:'js.subcontext.js',JS_SUBCONTEXT_FRAME:'js.subcontext.frame',JSON_APPCONFIG:'json.appconfig',JSON_APPCONFIG_GAME:'json.appconfig.game',JSON_PLUGIN:'json.plugin',JSON_WXAPPCODE:'json.wxappcode',JSON_WXAPPCODE_APPSERVICE:'json.wxappcode.appservice',JSON_WXAPPCODE_PAGEFRAME:'json.wxappcode.pageframe',JSON_PLUGIN_COMPILED:'plugin.json.compiled',JSON_CUSTOMCOMPONENT_CONFIG_PLUGIN:'json.customcomponent.config.plugin',JSON_CUSTOMCOMPONENT_CONFIG:'json.customcomponent.config',JSON_CUSTOMCOMPONENT_FILES:'custom.component.files',WXML_CUT:'wxml.cut',WXML_COMPLETE:'wxml.complete',WXML_PLUGIN:'wxml.plugin',WXSS_MAIN:'wxss.main',WXSS_SUBPACKAGE:'wxss.subpackage',WXSS_PLUGIN:'wxss.plugin',JS_FILE:'js.file',JS_MAP_FILE:'js.map.file',JSON_FILE:'json.file'};let projectFiles,cache={};function _handler(a,b){const c=path.posix.extname(b),d=path.posix.basename(b),e=path.posix.dirname(b);if('.json'===c&&(remove(CACHE_KEYS.JSON_WXAPPCODE_APPSERVICE),remove(CACHE_KEYS.JSON_APPCONFIG),remove(CACHE_KEYS.JSON_PLUGIN),remove(CACHE_KEYS.JSON_PLUGIN_COMPILED),remove(CACHE_KEYS.JSON_WXAPPCODE_PAGEFRAME),remove(CACHE_KEYS.JSON_WXAPPCODE),remove(CACHE_KEYS.JSON_CUSTOMCOMPONENT_CONFIG),remove(CACHE_KEYS.JSON_CUSTOMCOMPONENT_CONFIG_PLUGIN),remove(CACHE_KEYS.JSON_CUSTOMCOMPONENT_FILES),remove(CACHE_KEYS.JS_APPSERVICE),remove(CACHE_KEYS.JS_APPSERVICE_PLUGIN),remove(CACHE_KEYS.JS_PAGEFRAME),remove(CACHE_KEYS.JS_PAGEFRAME_PLUGIN),remove(CACHE_KEYS.WXML_COMPLETE),remove(CACHE_KEYS.WXML_CUT),remove(CACHE_KEYS.WXML_PLUGIN),'app.json'===d&&(remove(CACHE_KEYS.JS_PLUGINCODE_PAGEFRAME),remove(CACHE_KEYS.JS_PLUGINCODE_APPSERVICE),remove(CACHE_KEYS.JS_SUBPACKAGE_APPSERVICE),remove(CACHE_KEYS.JS_APPSERVICE_WIDGET),remove(CACHE_KEYS.WXSS_MAIN),remove(CACHE_KEYS.WXSS_SUBPACKAGE)),('game.json'===d||'app-config.json'===d)&&(remove(CACHE_KEYS.JSON_APPCONFIG_GAME),remove(CACHE_KEYS.JS_SUBPACKAGE_GAME),remove(CACHE_KEYS.JS_SUBCONTEXT_JS),remove(CACHE_KEYS.JS_APPSERVICE_GAME),remove(CACHE_KEYS.JS_APPSERVICE_GAME_MAIN),remove(CACHE_KEYS.JS_APPSERVICE_WIDGET)),'project.config.json'===d&&remove(CACHE_KEYS.JS_APPSERVICE_GAME_MAIN),'plugin.json'===d&&remove(CACHE_KEYS.WXSS_PLUGIN),remove(CACHE_KEYS.JSON_FILE)),'.wxss'===c&&(remove(CACHE_KEYS.JS_PAGEFRAME),remove(CACHE_KEYS.JS_PAGEFRAME_PLUGIN),remove(CACHE_KEYS.JSON_WXAPPCODE_PAGEFRAME),remove(CACHE_KEYS.WXSS_MAIN),remove(CACHE_KEYS.WXSS_SUBPACKAGE),remove(CACHE_KEYS.WXSS_PLUGIN)),'.wxs'===c&&(remove(CACHE_KEYS.WXML_COMPLETE),remove(CACHE_KEYS.WXML_CUT),remove(CACHE_KEYS.WXML_PLUGIN),remove(CACHE_KEYS.JS_PAGEFRAME),remove(CACHE_KEYS.JS_APPSERVICE_PLUGIN),remove(CACHE_KEYS.JS_PAGEFRAME_PLUGIN)),'.wxml'===c&&(remove(CACHE_KEYS.JSON_WXAPPCODE_APPSERVICE),remove(CACHE_KEYS.JS_PAGEFRAME),remove(CACHE_KEYS.JS_APPSERVICE_PLUGIN),remove(CACHE_KEYS.JS_PAGEFRAME_PLUGIN),remove(CACHE_KEYS.WXML_COMPLETE),remove(CACHE_KEYS.WXML_CUT),remove(CACHE_KEYS.WXML_PLUGIN),('add'===a||'unlink'===a)&&(remove(CACHE_KEYS.JSON_CUSTOMCOMPONENT_CONFIG),remove(CACHE_KEYS.JSON_CUSTOMCOMPONENT_CONFIG_PLUGIN),remove(CACHE_KEYS.JSON_CUSTOMCOMPONENT_FILES))),'.js'===c&&(remove(CACHE_KEYS.JS_APPSERVICE_PLUGIN),('add'===a||'unlink'===a)&&(remove(CACHE_KEYS.JS_APPSERVICE),remove(CACHE_KEYS.JS_APPSERVICE_GAME),remove(CACHE_KEYS.JS_APPSERVICE_GAME_MAIN),remove(CACHE_KEYS.JS_APPSERVICE_WIDGET),remove(CACHE_KEYS.JS_SUBCONTEXT_JS),remove(CACHE_KEYS.JSON_CUSTOMCOMPONENT_CONFIG),remove(CACHE_KEYS.JSON_CUSTOMCOMPONENT_CONFIG_PLUGIN),remove(CACHE_KEYS.JSON_CUSTOMCOMPONENT_FILES),remove(CACHE_KEYS.JSON_APPCONFIG_GAME)),cache[CACHE_KEYS.JS_SUBPACKAGE_GAME]))for(const a in cache[CACHE_KEYS.JS_SUBPACKAGE_GAME])0===b.indexOf(a)&&delete cache[CACHE_KEYS.JS_SUBPACKAGE_GAME][a];if(0<=e.indexOf('/miniprogram_npm/'))for(const a in cache)cache[a]&&cache[a].nodeModules&&remove(a);if(cache[CACHE_KEYS.JS_SUBPACKAGE_APPSERVICE])for(const a in cache[CACHE_KEYS.JS_SUBPACKAGE_APPSERVICE])0===b.indexOf(a)&&delete cache[CACHE_KEYS.JS_SUBPACKAGE_APPSERVICE][a];remove(b)}const init=async(a)=>{const b=tools.normalizePath(a.projectpath);projectFiles&&tools.normalizePath(projectFiles.dirPath)===b||(projectFiles&&projectFiles.removeListener('all',_handler),projectFiles=await FileUtils(a.projectpath,!0),projectFiles.on('all',_handler),cache={})},get=(a,b='main')=>cache[a]&&cache[a][b],set=function(a,b,c){2===arguments.length&&(c=b,b='main'),cache[a]||(cache[a]={}),cache[a][b]=c},remove=(a)=>{delete cache[a]};module.exports={CACHE_KEYS,init,get,set,remove};
;}(require("lazyload"), require);
