'use strict';!function(require,directRequire){async function a(a){return new Promise((b)=>{d.existsSync(a)&&b(),i(a,()=>{b()})})}async function b(b,c){const e=f.join(t,`${+new Date}`),g=c.map((c)=>new Promise(async(g,h)=>{const i=f.join(e,c),j=f.dirname(i);await a(j),d.createReadStream(f.join(b,c)).on('error',(a)=>{h(a)}).pipe(d.createWriteStream(i)).on('close',()=>{g()}).on('error',(a)=>{h(a)})}));return await Promise.all(g),e}async function c(a){let c=r.getCurrent();const e=f.join(c.projectpath,'doc');let h=await y('**/*.+(md|jpg|jpeg|png|icon|gif|svg|cer)',{nodir:!0,ignore:['**/.git/**','.git/**/*','**/.svn/**','.svn/**/*','.DS_Store','**/.DS_Store'],nosort:!0,strict:!1,silent:!0,cwd:e,absolute:!1,mark:!0,dot:!0,nocase:!0});h=h.filter((a)=>{return /\.md$/i.test(a)&&!/readme\.md/i.test(a)?!1:!0});const i=await b(e,h),k=f.join(t,`${+new Date}.wx`),m=await o(i,k);d.unlink(i,()=>{}),d.unlink(k,()=>{});const n=m.data,p=m.pDestPath;let q;const s=encodeURIComponent(a.desc),u=encodeURIComponent(a.version),w=encodeURIComponent(a.uuid);q=`${l.uploadPluginDoc}?user-version=${u}&user-desc=${s}&gzip=1`;const x=g.gzipSync(n),z=1*new Date,A={url:`${q}&devplugin=${c.compileType==v.plugin?1:0}`,method:'post',body:x,needToken:1,needAppID:1},{body:B}=await j(A),C=1*new Date;return B}const d=require('fs'),e=require('glob'),f=require('path'),g=require('zlib'),h=require('rmdir'),i=require('mkdir-p'),j=require('./15ba1827c7f6564a45df6bd44da3a977.js'),k=require('./92320c1386e6db6a6f2556736a9bc280.js'),l=require('./f171257bbcaef547a3cf27266ccb0db2.js'),m=require('./949d8235c744ced2a80121e4dba34c28.js'),n=require('./911222a6723da8db7ca8a8e3689591e1.js'),o=require('./e5fa35c3c8e81bc6466b4b8eb436113b.js'),p=require('./84858de8a097c9cf84ff2c2e3d86e2a9.js'),q=require('./common/locales/index.js'),r=require('./3bfffbe88b3d923921f851c0697974fe.js'),s=require('./72653d4b93cdd7443296229431a7aa9a.js'),t=k.Weappdest,u=require('./da7c31daaf542cf1796023d8e344b98a.js'),v=require('./9fdd4ac31a05c27355910f0d74accd4c.js'),w=require('./1c8a8c710417d102ab574145dc51b4b0.js'),x=require('./a932aac82ac84fc9c6c92194bd88204e.js'),y=function(a,b){return new Promise((c)=>{e(a,b,(a,b)=>{a?c([]):c(b)})})};module.exports=async function(a){return x.enqueueBuildTask(c.bind(null,a),x.buildType.uploadPluginDoc)}}(require('lazyload'),require);